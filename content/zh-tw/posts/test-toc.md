---
title: "测試文章目录功能"
slug: "testing-table-of-contents-functionality"
date: 2025-10-29T15:00:00+08:00
draft: false
categories: ["测試"]
tags: ["TOC", "目录", "功能测試"]
cover: "https://images.unsplash.com/photo-1456324504439-367cee3b3c32?w=800"
description: "這是一篇用于测試文章目录（TOC）功能的文章，包含多级标题结构。"
toc: true

aliases:
  - /2025/10/测試文章目录功能/
---

這是一篇用于测試文章目录（TOC）功能的文章。文章包含多级标题，用于验證目录的生成、滚動高亮和點擊跳轉功能。

<!--more-->

## 第一章：介绍

這是第一章的內容。在這一章中，我們将介绍文章目录功能的基本概念和使用方法。

### 1.1 什么是 TOC

TOC（Table of Contents）即目录，是一种幫助讀者快速了解文章结构和导航到特定章節的工具。

### 1.2 TOC 的作用

文章目录可以：

- 提供文章结构的概览
- 快速定位到感興趣的章節
- 提升阅讀體验
- 显示當前阅讀進度

## 第二章：功能特性

本章介绍 TOC 的各种功能特性。

### 2.1 自動生成

TOC 會自動從文章的标题（H2、H3 等）生成目录结构，无需手動維护。

### 2.2 滚動高亮

當用户滚動页面時，TOC 會自動高亮當前正在阅讀的章節，让用户清楚地知道自己的阅讀位置。

#### 2.2.1 高亮算法

使用 Intersection Observer API 來檢测标题元素是否進入視口，從而实現精确的滚動高亮。

#### 2.2.2 平滑過渡

高亮状態的切换使用 CSS 過渡動画，提供流畅的視觉體验。

### 2.3 點擊跳轉

點擊 TOC 中的任意章節，页面會平滑滚動到對應的标题位置。

### 2.4 阅讀進度

TOC 顶部显示當前的阅讀進度百分比，让用户了解文章的阅讀進度。

## 第三章：响應式設計

TOC 在不同設备上有不同的表現形式。

### 3.1 桌面端

在桌面端（屏幕寬度 ≥ 1024px），TOC 固定显示在侧边栏中，使用 sticky 定位跟隨页面滚動。

### 3.2 移動端

在移動端（屏幕寬度 < 1024px），TOC 默認隐藏，可以通過按钮切换显示。

#### 3.2.1 浮動显示

移動端的 TOC 以浮動卡片的形式显示在页面右下角，不占用主要內容区域。

#### 3.2.2 触摸優化

移動端的 TOC 链接有更大的點擊区域，方便触摸操作。

## 第四章：樣式設計

TOC 的樣式設計遵循 Butterfly 主题的視觉風格。

### 4.1 卡片樣式

TOC 使用卡片樣式，與主题的其他组件保持一致。

### 4.2 顏色方案

- 普通链接：灰色文字
- 悬停链接：主题色背景 + 主题色文字
- 活動链接：主题色背景 + 白色文字

### 4.3 暗色模式

TOC 完全支持暗色模式，在暗色主题下使用深色背景和浅色文字。

## 第五章：技術实現

本章介绍 TOC 的技術实現細節。

### 5.1 Hugo 模板

使用 Hugo 的 `.TableOfContents` 变量自動生成目录 HTML 结构。

### 5.2 TypeScript 模塊

TOC 的交互功能使用 TypeScript 实現，包括：

- 滚動监聽
- 高亮切换
- 點擊跳轉
- 進度計算

### 5.3 CSS 樣式

使用 Tailwind CSS v4 和自定义 CSS 实現 TOC 的樣式。

#### 5.3.1 布局

使用 Flexbox 和 Grid 实現响應式布局。

#### 5.3.2 動画

使用 CSS transition 和 transform 实現平滑的動画效果。

## 第六章：性能優化

TOC 的实現註重性能優化。

### 6.1 Intersection Observer

使用 Intersection Observer API 代替傳统的 scroll 事件监聽，减少性能開销。

### 6.2 防抖處理

對于频繁触發的事件（如滚動），使用 requestAnimationFrame 進行防抖處理。

### 6.3 懒加載

TOC 只在需要時才初始化，不會影响页面的初始加載速度。

## 第七章：可访問性

TOC 的实現考慮了可访問性（A11y）。

### 7.1 語义化 HTML

使用語义化的 HTML 标签（nav、ul、li、a）构建 TOC 结构。

### 7.2 键盤导航

TOC 中的所有链接都可以通過键盤 Tab 键访問。

### 7.3 屏幕阅讀器

為 TOC 添加適當的 ARIA 标签，确保屏幕阅讀器用户也能使用。

## 第八章：未來改進

TOC 功能还有一些可以改進的地方。

### 8.1 折叠/展開

支持折叠和展開子章節，让 TOC 更加紧凑。

### 8.2 搜索功能

在 TOC 中添加搜索框，快速定位到特定章節。

### 8.3 自定义配置

允許用户自定义 TOC 的显示级別（如只显示 H2 和 H3）。

## 总结

文章目录（TOC）是提升阅讀體验的重要功能。通過自動生成、滚動高亮、點擊跳轉等特性，TOC 让讀者能够更好地理解文章结构和快速导航到感興趣的內容。

本文介绍了 TOC 的功能特性、响應式設計、樣式設計、技術实現、性能優化和可访問性等方面，希望能幫助你更好地理解和使用這個功能。
