---
title: "测试文章目录功能"
slug: "testing-table-of-contents-functionality"
date: 2025-10-29T15:00:00+08:00
draft: false
categories: ["测试"]
tags: ["TOC", "目录", "功能测试"]
cover: "https://images.unsplash.com/photo-1456324504439-367cee3b3c32?w=800"
description: "这是一篇用于测试文章目录（TOC）功能的文章，包含多级标题结构。"
toc: true

aliases:
  - /2025/10/测试文章目录功能/
---

这是一篇用于测试文章目录（TOC）功能的文章。文章包含多级标题，用于验证目录的生成、滚动高亮和点击跳转功能。

<!--more-->

## 第一章：介绍

这是第一章的内容。在这一章中，我们将介绍文章目录功能的基本概念和使用方法。

### 1.1 什么是 TOC

TOC（Table of Contents）即目录，是一种帮助读者快速了解文章结构和导航到特定章节的工具。

### 1.2 TOC 的作用

文章目录可以：

- 提供文章结构的概览
- 快速定位到感兴趣的章节
- 提升阅读体验
- 显示当前阅读进度

## 第二章：功能特性

本章介绍 TOC 的各种功能特性。

### 2.1 自动生成

TOC 会自动从文章的标题（H2、H3 等）生成目录结构，无需手动维护。

### 2.2 滚动高亮

当用户滚动页面时，TOC 会自动高亮当前正在阅读的章节，让用户清楚地知道自己的阅读位置。

#### 2.2.1 高亮算法

使用 Intersection Observer API 来检测标题元素是否进入视口，从而实现精确的滚动高亮。

#### 2.2.2 平滑过渡

高亮状态的切换使用 CSS 过渡动画，提供流畅的视觉体验。

### 2.3 点击跳转

点击 TOC 中的任意章节，页面会平滑滚动到对应的标题位置。

### 2.4 阅读进度

TOC 顶部显示当前的阅读进度百分比，让用户了解文章的阅读进度。

## 第三章：响应式设计

TOC 在不同设备上有不同的表现形式。

### 3.1 桌面端

在桌面端（屏幕宽度 ≥ 1024px），TOC 固定显示在侧边栏中，使用 sticky 定位跟随页面滚动。

### 3.2 移动端

在移动端（屏幕宽度 < 1024px），TOC 默认隐藏，可以通过按钮切换显示。

#### 3.2.1 浮动显示

移动端的 TOC 以浮动卡片的形式显示在页面右下角，不占用主要内容区域。

#### 3.2.2 触摸优化

移动端的 TOC 链接有更大的点击区域，方便触摸操作。

## 第四章：样式设计

TOC 的样式设计遵循 Butterfly 主题的视觉风格。

### 4.1 卡片样式

TOC 使用卡片样式，与主题的其他组件保持一致。

### 4.2 颜色方案

- 普通链接：灰色文字
- 悬停链接：主题色背景 + 主题色文字
- 活动链接：主题色背景 + 白色文字

### 4.3 暗色模式

TOC 完全支持暗色模式，在暗色主题下使用深色背景和浅色文字。

## 第五章：技术实现

本章介绍 TOC 的技术实现细节。

### 5.1 Hugo 模板

使用 Hugo 的 `.TableOfContents` 变量自动生成目录 HTML 结构。

### 5.2 TypeScript 模块

TOC 的交互功能使用 TypeScript 实现，包括：

- 滚动监听
- 高亮切换
- 点击跳转
- 进度计算

### 5.3 CSS 样式

使用 Tailwind CSS v4 和自定义 CSS 实现 TOC 的样式。

#### 5.3.1 布局

使用 Flexbox 和 Grid 实现响应式布局。

#### 5.3.2 动画

使用 CSS transition 和 transform 实现平滑的动画效果。

## 第六章：性能优化

TOC 的实现注重性能优化。

### 6.1 Intersection Observer

使用 Intersection Observer API 代替传统的 scroll 事件监听，减少性能开销。

### 6.2 防抖处理

对于频繁触发的事件（如滚动），使用 requestAnimationFrame 进行防抖处理。

### 6.3 懒加载

TOC 只在需要时才初始化，不会影响页面的初始加载速度。

## 第七章：可访问性

TOC 的实现考虑了可访问性（A11y）。

### 7.1 语义化 HTML

使用语义化的 HTML 标签（nav、ul、li、a）构建 TOC 结构。

### 7.2 键盘导航

TOC 中的所有链接都可以通过键盘 Tab 键访问。

### 7.3 屏幕阅读器

为 TOC 添加适当的 ARIA 标签，确保屏幕阅读器用户也能使用。

## 第八章：未来改进

TOC 功能还有一些可以改进的地方。

### 8.1 折叠/展开

支持折叠和展开子章节，让 TOC 更加紧凑。

### 8.2 搜索功能

在 TOC 中添加搜索框，快速定位到特定章节。

### 8.3 自定义配置

允许用户自定义 TOC 的显示级别（如只显示 H2 和 H3）。

## 总结

文章目录（TOC）是提升阅读体验的重要功能。通过自动生成、滚动高亮、点击跳转等特性，TOC 让读者能够更好地理解文章结构和快速导航到感兴趣的内容。

本文介绍了 TOC 的功能特性、响应式设计、样式设计、技术实现、性能优化和可访问性等方面，希望能帮助你更好地理解和使用这个功能。
