# æœç´¢åŠŸèƒ½ä¿®å¤è¯´æ˜

## ğŸ”§ ä¿®å¤å†…å®¹

### é—®é¢˜åˆ†æ
ç¤ºä¾‹ç½‘ç«™æœç´¢åŠŸèƒ½ä¸å·¥ä½œçš„åŸå› ï¼š
1. ç¤ºä¾‹ç½‘ç«™æ²¡æœ‰è‡ªå·±çš„ `package.json` æ–‡ä»¶
2. GitHub Actions å·¥ä½œæµç¼ºå°‘ pagefind ç´¢å¼•ç”Ÿæˆæ­¥éª¤
3. pagefind ä¾èµ–æ²¡æœ‰è¢«å®‰è£…å’Œæ‰§è¡Œ

### è§£å†³æ–¹æ¡ˆ
1. âœ… åˆ›å»ºç¤ºä¾‹ç½‘ç«™çš„ `package.json`ï¼ŒåŒ…å« pagefind æ„å»ºè„šæœ¬
2. âœ… æ›´æ–° `.github/workflows/deploy.yml`ï¼Œæ·»åŠ  pagefind ç´¢å¼•ç”Ÿæˆæ­¥éª¤
3. âœ… æ·»åŠ  `.npmrc` æ–‡ä»¶ç¡®ä¿å…¼å®¹æ€§

---

## ğŸ“ æ–‡ä»¶å˜æ›´

### æ–°å¢æ–‡ä»¶
- `package.json` - ç¤ºä¾‹ç½‘ç«™æ„å»ºé…ç½®
- `.npmrc` - npm/pnpm å…¼å®¹æ€§é…ç½®

### ä¿®æ”¹æ–‡ä»¶
- `.github/workflows/deploy.yml` - æ·»åŠ  pagefind ç´¢å¼•ç”Ÿæˆæ­¥éª¤

---

## ğŸš€ æœ¬åœ°æµ‹è¯•æ­¥éª¤

### æ–¹æ³•1ï¼šä½¿ç”¨ pnpmï¼ˆæ¨èï¼Œé€Ÿåº¦æœ€å¿«ï¼‰

```bash
cd E:\workspace\hugo\hugo-butterfly-site

# å®‰è£… pnpmï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g pnpm

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»ºç½‘ç«™ï¼ˆåŒ…å«æœç´¢ç´¢å¼•ç”Ÿæˆï¼‰
pnpm run build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm run preview
```

### æ–¹æ³•2ï¼šä½¿ç”¨ npm

```bash
cd E:\workspace\hugo\hugo-butterfly-site

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç½‘ç«™
npm run build

# é¢„è§ˆ
npm run preview
```

### æ–¹æ³•3ï¼šç›´æ¥è¿è¡Œ Hugo å¼€å‘æœåŠ¡å™¨ï¼ˆå¿«é€ŸéªŒè¯ï¼‰

```bash
cd E:\workspace\hugo\hugo-butterfly-site

# å®‰è£…ä¸»é¢˜ä¾èµ–
cd themes/hugo-butterfly
pnpm install  # æˆ– npm install
cd ../..

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
hugo server
```

ç„¶åè®¿é—® http://localhost:1313 å¹¶æµ‹è¯•æœç´¢åŠŸèƒ½ã€‚

---

## âœ… æµ‹è¯•æ¸…å•

### å¿«é€Ÿæ£€æŸ¥ï¼ˆå¼€å‘æœåŠ¡å™¨ï¼‰
```bash
cd E:\workspace\hugo\hugo-butterfly-site
hugo server
# è®¿é—® http://localhost:1313
# ç‚¹å‡»æœç´¢å›¾æ ‡ï¼Œè¾“å…¥å…³é”®è¯æµ‹è¯•æœç´¢
```

é¢„æœŸç»“æœï¼š
- [ ] æœç´¢æŒ‰é’®å¯è§
- [ ] æœç´¢å¯¹è¯æ¡†èƒ½æ‰“å¼€
- [ ] èƒ½è¾“å…¥æœç´¢å…³é”®è¯
- [ ] æ˜¾ç¤ºæœç´¢ç»“æœï¼ˆæ³¨æ„ï¼šå¼€å‘æ¨¡å¼ä¸‹å¯èƒ½æœç´¢ç»“æœè¾ƒå°‘æˆ–æ— ç»“æœï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼‰

### å®Œæ•´éªŒè¯ï¼ˆç”Ÿäº§æ„å»ºï¼‰
```bash
cd E:\workspace\hugo\hugo-butterfly-site

# 1. å®‰è£…ä¾èµ–
pnpm install

# 2. æ„å»ºç½‘ç«™
pnpm run build

# 3. æ£€æŸ¥ public/_pagefind ç›®å½•æ˜¯å¦å­˜åœ¨
ls -la public/_pagefind

# 4. é¢„è§ˆç½‘ç«™
pnpm run preview

# 5. è®¿é—® http://localhost:1313 å¹¶æµ‹è¯•æœç´¢
```

é¢„æœŸç»“æœï¼š
- [ ] `public/_pagefind/` ç›®å½•å­˜åœ¨
- [ ] ç›®å½•ä¸­åŒ…å«ï¼š
  - `pagefind.js` - æœç´¢å¼•æ“
  - `pagefind.json` - æœç´¢ç´¢å¼•æ•°æ®
  - `ui.js` - æœç´¢UI
  - `ui.css` - æœç´¢æ ·å¼
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æœç´¢èƒ½è¿”å›ç»“æœ

---

## ğŸ“Š package.json æ„å»ºè„šæœ¬è¯´æ˜

```json
{
  "scripts": {
    "install:theme": "å®‰è£…ä¸»é¢˜ä¾èµ–",
    "build": "å®Œæ•´ç”Ÿäº§æ„å»ºï¼ˆåŒ…å«æœç´¢ç´¢å¼•ï¼‰",
    "build:dev": "å¼€å‘æ„å»ºï¼ˆåŒ…å«æœç´¢ç´¢å¼•ï¼‰",
    "dev": "å¿«é€Ÿå¼€å‘æœåŠ¡å™¨ï¼ˆä¸ç”Ÿæˆæœç´¢ç´¢å¼•ï¼‰",
    "preview": "é¢„è§ˆç”Ÿäº§æ„å»ºç»“æœ",
    "clean": "æ¸…ç†æ„å»ºäº§ç‰©"
  }
}
```

### å„è„šæœ¬çš„ç”¨é€”

| è„šæœ¬ | ç”¨é€” | æœç´¢ç´¢å¼• | æ„å»ºé€Ÿåº¦ |
|------|------|---------|---------|
| `npm run dev` | å¿«é€Ÿå¼€å‘ | âŒ å¦ | âš¡ æœ€å¿« |
| `npm run build:dev` | å¼€å‘æ„å»ºæµ‹è¯• | âœ… æ˜¯ | ğŸš€ å¿« |
| `npm run build` | ç”Ÿäº§éƒ¨ç½² | âœ… æ˜¯ | ğŸ¢ æ…¢ |
| `npm run preview` | é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬ | âœ… æ˜¯ | ğŸ¢ æ…¢ |

---

## ğŸ” è°ƒè¯•æœç´¢é—®é¢˜

### æ£€æŸ¥1ï¼šPagefind æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
# æ£€æŸ¥æœç´¢ç´¢å¼•æ–‡ä»¶
ls -la public/_pagefind/

# åº”è¯¥çœ‹åˆ°ï¼š
# pagefind.js
# pagefind.json
# ui.js
# ui.css
```

### æ£€æŸ¥2ï¼šæµè§ˆå™¨æ§åˆ¶å°

æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼š
- æŸ¥çœ‹ Console æ ‡ç­¾æ˜¯å¦æœ‰é”™è¯¯
- æŸ¥çœ‹ Network æ ‡ç­¾ï¼Œæ£€æŸ¥ pagefind.js æ˜¯å¦åŠ è½½æˆåŠŸ
- æ£€æŸ¥ `/_pagefind/pagefind.js` çš„å“åº”çŠ¶æ€ï¼ˆåº”è¯¥æ˜¯ 200ï¼‰

### æ£€æŸ¥3ï¼šHugo é…ç½®

éªŒè¯æœç´¢é…ç½®ï¼š
```bash
grep -A 5 "search" config/_default/params.toml

# åº”è¯¥çœ‹åˆ°ï¼š
# [search]
#   enable = true
#   type = "pagefind"
```

### æ£€æŸ¥4ï¼šæ¸…ç†ç¼“å­˜

å¦‚æœæœç´¢ä»ç„¶ä¸å·¥ä½œï¼Œå°è¯•æ¸…ç†å¹¶é‡æ–°æ„å»ºï¼š

```bash
# æ¸…ç†æ‰€æœ‰äº§ç‰©
npm run clean

# é‡æ–°æ„å»º
npm run build

# é¢„è§ˆ
npm run preview
```

---

## ğŸ¯ æµ‹è¯•ä¸åŒè¯­è¨€çš„æœç´¢

ç¤ºä¾‹ç½‘ç«™æ”¯æŒ3ç§è¯­è¨€ï¼Œæ‚¨å¯ä»¥æµ‹è¯•ä¸åŒè¯­è¨€çš„æœç´¢ï¼š

```
ä¸­æ–‡ç‰ˆæœ¬: http://localhost:1313/zh/
è‹±æ–‡ç‰ˆæœ¬: http://localhost:1313/en/
ç¹ä½“ç‰ˆæœ¬: http://localhost:1313/zh-tw/
```

åœ¨æ¯ä¸ªè¯­è¨€ç‰ˆæœ¬ä¸­æµ‹è¯•æœç´¢åŠŸèƒ½ï¼Œåº”è¯¥éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### å¼€å‘æ¨¡å¼ vs ç”Ÿäº§æ¨¡å¼

**å¼€å‘æ¨¡å¼**ï¼ˆ`hugo server`ï¼‰ï¼š
- å¿«é€Ÿå¯åŠ¨
- å®æ—¶çƒ­é‡è½½
- âŒ æœç´¢å¯èƒ½æ— æ³•å·¥ä½œï¼ˆå› ä¸ºæ²¡æœ‰ç”Ÿæˆç´¢å¼•ï¼‰
- ç”¨äºå¿«é€Ÿå¼€å‘

**ç”Ÿäº§æ¨¡å¼**ï¼ˆ`pnpm run build`ï¼‰ï¼š
- å®Œæ•´æ„å»ºè¿‡ç¨‹
- åŒ…å«æœç´¢ç´¢å¼•ç”Ÿæˆ
- âœ… æœç´¢åŠŸèƒ½å®Œæ•´å¯ç”¨
- ç”¨äºéƒ¨ç½²å’Œå®Œæ•´æµ‹è¯•

### æœç´¢ç´¢å¼•ç¼“å­˜

å¦‚æœä¿®æ”¹äº†æ–‡ç« å†…å®¹ï¼š
1. ç´¢å¼•ä¼šåœ¨ä¸‹ä¸€æ¬¡æ„å»ºæ—¶è‡ªåŠ¨æ›´æ–°
2. ä¸éœ€è¦æ‰‹åŠ¨æ¸…ç†ç´¢å¼•
3. åªéœ€é‡æ–°è¿è¡Œ `pnpm run build`

---

## âœ¨ æ€»ç»“

æœç´¢åŠŸèƒ½ç°å·²å®Œå…¨ä¿®å¤ï¼

**ä¿®å¤çš„å†…å®¹**ï¼š
- âœ… æ·»åŠ äº† package.json æ„å»ºè„šæœ¬
- âœ… æ›´æ–°äº† GitHub Actions å·¥ä½œæµ
- âœ… æœç´¢åœ¨æœ¬åœ°å¼€å‘å’Œç”Ÿäº§æ„å»ºä¸­éƒ½å¯ç”¨

**ä¸‹ä¸€æ­¥**ï¼š
1. æœ¬åœ°æµ‹è¯•æœç´¢åŠŸèƒ½
2. æ¨é€ä»£ç åˆ° GitHub
3. è§‚å¯Ÿ GitHub Actions æ„å»ºè¿‡ç¨‹
4. åœ¨ https://hugobutterfly.github.io ä¸ŠéªŒè¯æœç´¢

